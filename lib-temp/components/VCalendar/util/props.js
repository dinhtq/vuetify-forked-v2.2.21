import { validateTimestamp, parseDate, DAYS_IN_WEEK } from './timestamp';
import { CalendarEventOverlapModes } from '../modes';
export default {
    base: {
        start: {
            type: String,
            validate: validateTimestamp,
            default: () => parseDate(new Date()).date,
        },
        end: {
            type: String,
            validate: validateTimestamp,
        },
        weekdays: {
            type: [Array, String],
            default: () => [0, 1, 2, 3, 4, 5, 6],
            validate: validateWeekdays,
        },
        hideHeader: {
            type: Boolean,
            default: false,
        },
        shortWeekdays: {
            type: Boolean,
            default: true,
        },
        weekdayFormat: {
            type: Function,
            default: null,
        },
        dayFormat: {
            type: Function,
            default: null,
        },
    },
    intervals: {
        maxDays: {
            type: Number,
            default: 7,
        },
        shortIntervals: {
            type: Boolean,
            default: true,
        },
        intervalHeight: {
            type: [Number, String],
            default: 48,
            validate: validateNumber,
        },
        intervalWidth: {
            type: [Number, String],
            default: 60,
            validate: validateNumber,
        },
        intervalMinutes: {
            type: [Number, String],
            default: 60,
            validate: validateNumber,
        },
        firstInterval: {
            type: [Number, String],
            default: 0,
            validate: validateNumber,
        },
        intervalCount: {
            type: [Number, String],
            default: 24,
            validate: validateNumber,
        },
        intervalFormat: {
            type: Function,
            default: null,
        },
        intervalStyle: {
            type: Function,
            default: null,
        },
        showIntervalLabel: {
            type: Function,
            default: null,
        },
    },
    weeks: {
        minWeeks: {
            validate: validateNumber,
            default: 1,
        },
        shortMonths: {
            type: Boolean,
            default: true,
        },
        showMonthOnFirst: {
            type: Boolean,
            default: true,
        },
        monthFormat: {
            type: Function,
            default: null,
        },
    },
    calendar: {
        type: {
            type: String,
            default: 'month',
        },
        value: {
            type: String,
            validate: validateTimestamp,
        },
    },
    events: {
        events: {
            type: Array,
            default: () => [],
        },
        eventStart: {
            type: String,
            default: 'start',
        },
        eventEnd: {
            type: String,
            default: 'end',
        },
        eventHeight: {
            type: Number,
            default: 20,
        },
        eventColor: {
            type: [String, Function],
            default: 'primary',
        },
        eventTextColor: {
            type: [String, Function],
            default: 'white',
        },
        eventName: {
            type: [String, Function],
            default: 'name',
        },
        eventOverlapThreshold: {
            type: [String, Number],
            default: 60,
        },
        eventOverlapMode: {
            type: [String, Function],
            default: 'stack',
            validate: (mode) => mode in CalendarEventOverlapModes || typeof mode === 'function',
        },
        eventMore: {
            type: Boolean,
            default: true,
        },
        eventMoreText: {
            type: String,
            default: '$vuetify.calendar.moreEvents',
        },
        eventRipple: {
            type: [Boolean, Object],
            default: null,
        },
        eventMarginBottom: {
            type: Number,
            default: 1,
        },
    },
};
export function validateNumber(input) {
    return isFinite(parseInt(input));
}
export function validateWeekdays(input) {
    if (typeof input === 'string') {
        input = input.split(',');
    }
    if (Array.isArray(input)) {
        const ints = input.map(x => parseInt(x));
        if (ints.length > DAYS_IN_WEEK || ints.length === 0) {
            return false;
        }
        const visited = {};
        let wrapped = false;
        for (let i = 0; i < ints.length; i++) {
            const x = ints[i];
            if (!isFinite(x) || x < 0 || x >= DAYS_IN_WEEK) {
                return false;
            }
            if (i > 0) {
                const d = x - ints[i - 1];
                if (d < 0) {
                    if (wrapped) {
                        return false;
                    }
                    wrapped = true;
                }
                else if (d === 0) {
                    return false;
                }
            }
            if (visited[x]) {
                return false;
            }
            visited[x] = true;
        }
        return true;
    }
    return false;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvcHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9WQ2FsZW5kYXIvdXRpbC9wcm9wcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUd4RSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFHcEQsZUFBZTtJQUNiLElBQUksRUFBRTtRQUNKLEtBQUssRUFBRTtZQUNMLElBQUksRUFBRSxNQUFNO1lBQ1osUUFBUSxFQUFFLGlCQUFpQjtZQUMzQixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJO1NBQzFDO1FBQ0QsR0FBRyxFQUFFO1lBQ0gsSUFBSSxFQUFFLE1BQU07WUFDWixRQUFRLEVBQUUsaUJBQWlCO1NBQzVCO1FBQ0QsUUFBUSxFQUFFO1lBQ1IsSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQztZQUNyQixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDcEMsUUFBUSxFQUFFLGdCQUFnQjtTQUNTO1FBQ3JDLFVBQVUsRUFBRTtZQUNWLElBQUksRUFBRSxPQUFPO1lBQ2IsT0FBTyxFQUFFLEtBQUs7U0FDZjtRQUNELGFBQWEsRUFBRTtZQUNiLElBQUksRUFBRSxPQUFPO1lBQ2IsT0FBTyxFQUFFLElBQUk7U0FDZDtRQUNELGFBQWEsRUFBRTtZQUNiLElBQUksRUFBRSxRQUF1QztZQUM3QyxPQUFPLEVBQUUsSUFBSTtTQUNkO1FBQ0QsU0FBUyxFQUFFO1lBQ1QsSUFBSSxFQUFFLFFBQXVDO1lBQzdDLE9BQU8sRUFBRSxJQUFJO1NBQ2Q7S0FD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SUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDbkQsT0FBTyxLQUFLLENBQUE7U0FDYjtRQUVELE1BQU0sT0FBTyxHQUE0QixFQUFFLENBQUE7UUFDM0MsSUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFBO1FBRW5CLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3BDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUVqQixJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLFlBQVksRUFBRTtnQkFDOUMsT0FBTyxLQUFLLENBQUE7YUFDYjtZQUVELElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDVCxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtnQkFDekIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFO29CQUNULElBQUksT0FBTyxFQUFFO3dCQUNYLE9BQU8sS0FBSyxDQUFBO3FCQUNiO29CQUNELE9BQU8sR0FBRyxJQUFJLENBQUE7aUJBQ2Y7cUJBQU0sSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUNsQixPQUFPLEtBQUssQ0FBQTtpQkFDYjthQUNGO1lBRUQsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7Z0JBQ2QsT0FBTyxLQUFLLENBQUE7YUFDYjtZQUNELE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUE7U0FDbEI7UUFFRCxPQUFPLElBQUksQ0FBQTtLQUNaO0lBRUQsT0FBTyxLQUFLLENBQUE7QUFDZCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyB2YWxpZGF0ZVRpbWVzdGFtcCwgcGFyc2VEYXRlLCBEQVlTX0lOX1dFRUsgfSBmcm9tICcuL3RpbWVzdGFtcCdcbmltcG9ydCB7IFByb3BUeXBlIH0gZnJvbSAndnVlJ1xuaW1wb3J0IHsgQ2FsZW5kYXJFdmVudCwgQ2FsZW5kYXJGb3JtYXR0ZXIsIENhbGVuZGFyVGltZXN0YW1wLCBDYWxlbmRhckV2ZW50T3ZlcmxhcE1vZGUgfSBmcm9tICd0eXBlcydcbmltcG9ydCB7IENhbGVuZGFyRXZlbnRPdmVybGFwTW9kZXMgfSBmcm9tICcuLi9tb2RlcydcbmltcG9ydCB7IFByb3BWYWxpZGF0b3IgfSBmcm9tICd2dWUvdHlwZXMvb3B0aW9ucydcblxuZXhwb3J0IGRlZmF1bHQge1xuICBiYXNlOiB7XG4gICAgc3RhcnQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHZhbGlkYXRlOiB2YWxpZGF0ZVRpbWVzdGFtcCxcbiAgICAgIGRlZmF1bHQ6ICgpID0+IHBhcnNlRGF0ZShuZXcgRGF0ZSgpKS5kYXRlLFxuICAgIH0sXG4gICAgZW5kOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICB2YWxpZGF0ZTogdmFsaWRhdGVUaW1lc3RhbXAsXG4gICAgfSxcbiAgICB3ZWVrZGF5czoge1xuICAgICAgdHlwZTogW0FycmF5LCBTdHJpbmddLFxuICAgICAgZGVmYXVsdDogKCkgPT4gWzAsIDEsIDIsIDMsIDQsIDUsIDZdLFxuICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlV2Vla2RheXMsXG4gICAgfSBhcyBQcm9wVmFsaWRhdG9yPG51bWJlcltdIHwgc3RyaW5nPixcbiAgICBoaWRlSGVhZGVyOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgfSxcbiAgICBzaG9ydFdlZWtkYXlzOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB9LFxuICAgIHdlZWtkYXlGb3JtYXQ6IHtcbiAgICAgIHR5cGU6IEZ1bmN0aW9uIGFzIFByb3BUeXBlPENhbGVuZGFyRm9ybWF0dGVyPixcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgICBkYXlGb3JtYXQ6IHtcbiAgICAgIHR5cGU6IEZ1bmN0aW9uIGFzIFByb3BUeXBlPENhbGVuZGFyRm9ybWF0dGVyPixcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgfSxcbiAgaW50ZXJ2YWxzOiB7XG4gICAgbWF4RGF5czoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogNyxcbiAgICB9LFxuICAgIHNob3J0SW50ZXJ2YWxzOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB9LFxuICAgIGludGVydmFsSGVpZ2h0OiB7XG4gICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLFxuICAgICAgZGVmYXVsdDogNDgsXG4gICAgICB2YWxpZGF0ZTogdmFsaWRhdGVOdW1iZXIsXG4gICAgfSxcbiAgICBpbnRlcnZhbFdpZHRoOiB7XG4gICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLFxuICAgICAgZGVmYXVsdDogNjAsXG4gICAgICB2YWxpZGF0ZTogdmFsaWRhdGVOdW1iZXIsXG4gICAgfSxcbiAgICBpbnRlcnZhbE1pbnV0ZXM6IHtcbiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sXG4gICAgICBkZWZhdWx0OiA2MCxcbiAgICAgIHZhbGlkYXRlOiB2YWxpZGF0ZU51bWJlcixcbiAgICB9LFxuICAgIGZpcnN0SW50ZXJ2YWw6IHtcbiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sXG4gICAgICBkZWZhdWx0OiAwLFxuICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlTnVtYmVyLFxuICAgIH0sXG4gICAgaW50ZXJ2YWxDb3VudDoge1xuICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSxcbiAgICAgIGRlZmF1bHQ6IDI0LFxuICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlTnVtYmVyLFxuICAgIH0sXG4gICAgaW50ZXJ2YWxGb3JtYXQ6IHtcbiAgICAgIHR5cGU6IEZ1bmN0aW9uIGFzIFByb3BUeXBlPENhbGVuZGFyRm9ybWF0dGVyPixcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgICBpbnRlcnZhbFN0eWxlOiB7XG4gICAgICB0eXBlOiBGdW5jdGlvbiBhcyBQcm9wVHlwZTwoaW50ZXJ2YWw6IENhbGVuZGFyVGltZXN0YW1wKSA9PiBvYmplY3Q+LFxuICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICB9LFxuICAgIHNob3dJbnRlcnZhbExhYmVsOiB7XG4gICAgICB0eXBlOiBGdW5jdGlvbiBhcyBQcm9wVHlwZTwoaW50ZXJ2YWw6IENhbGVuZGFyVGltZXN0YW1wKSA9PiBib29sZWFuPixcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgfSxcbiAgd2Vla3M6IHtcbiAgICBtaW5XZWVrczoge1xuICAgICAgdmFsaWRhdGU6IHZhbGlkYXRlTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMSxcbiAgICB9LFxuICAgIHNob3J0TW9udGhzOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB9LFxuICAgIHNob3dNb250aE9uRmlyc3Q6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiB0cnVlLFxuICAgIH0sXG4gICAgbW9udGhGb3JtYXQ6IHtcbiAgICAgIHR5cGU6IEZ1bmN0aW9uIGFzIFByb3BUeXBlPENhbGVuZGFyRm9ybWF0dGVyPixcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgfSxcbiAgY2FsZW5kYXI6IHtcbiAgICB0eXBlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnbW9udGgnLFxuICAgIH0sXG4gICAgdmFsdWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHZhbGlkYXRlOiB2YWxpZGF0ZVRpbWVzdGFtcCxcbiAgICB9LFxuICB9LFxuICBldmVudHM6IHtcbiAgICBldmVudHM6IHtcbiAgICAgIHR5cGU6IEFycmF5LFxuICAgICAgZGVmYXVsdDogKCkgPT4gW10sXG4gICAgfSBhcyBQcm9wVmFsaWRhdG9yPENhbGVuZGFyRXZlbnRbXT4sXG4gICAgZXZlbnRTdGFydDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ3N0YXJ0JyxcbiAgICB9LFxuICAgIGV2ZW50RW5kOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnZW5kJyxcbiAgICB9LFxuICAgIGV2ZW50SGVpZ2h0OiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAyMCxcbiAgICB9LFxuICAgIGV2ZW50Q29sb3I6IHtcbiAgICAgIHR5cGU6IFtTdHJpbmcsIEZ1bmN0aW9uXSxcbiAgICAgIGRlZmF1bHQ6ICdwcmltYXJ5JyxcbiAgICB9LFxuICAgIGV2ZW50VGV4dENvbG9yOiB7XG4gICAgICB0eXBlOiBbU3RyaW5nLCBGdW5jdGlvbl0sXG4gICAgICBkZWZhdWx0OiAnd2hpdGUnLFxuICAgIH0sXG4gICAgZXZlbnROYW1lOiB7XG4gICAgICB0eXBlOiBbU3RyaW5nLCBGdW5jdGlvbl0sXG4gICAgICBkZWZhdWx0OiAnbmFtZScsXG4gICAgfSxcbiAgICBldmVudE92ZXJsYXBUaHJlc2hvbGQ6IHtcbiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sXG4gICAgICBkZWZhdWx0OiA2MCxcbiAgICB9LFxuICAgIGV2ZW50T3ZlcmxhcE1vZGU6IHtcbiAgICAgIHR5cGU6IFtTdHJpbmcsIEZ1bmN0aW9uXSxcbiAgICAgIGRlZmF1bHQ6ICdzdGFjaycsXG4gICAgICB2YWxpZGF0ZTogKG1vZGU6IGFueSkgPT4gbW9kZSBpbiBDYWxlbmRhckV2ZW50T3ZlcmxhcE1vZGVzIHx8IHR5cGVvZiBtb2RlID09PSAnZnVuY3Rpb24nLFxuICAgIH0gYXMgUHJvcFZhbGlkYXRvcjwnc3RhY2snIHwgJ2NvbHVtbicgfCBDYWxlbmRhckV2ZW50T3ZlcmxhcE1vZGU+LFxuICAgIGV2ZW50TW9yZToge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgfSxcbiAgICBldmVudE1vcmVUZXh0OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnJHZ1ZXRpZnkuY2FsZW5kYXIubW9yZUV2ZW50cycsXG4gICAgfSxcbiAgICBldmVudFJpcHBsZToge1xuICAgICAgdHlwZTogW0Jvb2xlYW4sIE9iamVjdF0sXG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gICAgZXZlbnRNYXJnaW5Cb3R0b206IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDEsXG4gICAgfSxcbiAgfSxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlTnVtYmVyIChpbnB1dDogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBpc0Zpbml0ZShwYXJzZUludChpbnB1dCkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVdlZWtkYXlzIChpbnB1dDogc3RyaW5nIHwgKG51bWJlciB8IHN0cmluZylbXSk6IGJvb2xlYW4ge1xuICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJykge1xuICAgIGlucHV0ID0gaW5wdXQuc3BsaXQoJywnKVxuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgY29uc3QgaW50cyA9IGlucHV0Lm1hcCh4ID0+IHBhcnNlSW50KHgpKVxuXG4gICAgaWYgKGludHMubGVuZ3RoID4gREFZU19JTl9XRUVLIHx8IGludHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCB2aXNpdGVkOiBSZWNvcmQ8bnVtYmVyLCBib29sZWFuPiA9IHt9XG4gICAgbGV0IHdyYXBwZWQgPSBmYWxzZVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB4ID0gaW50c1tpXVxuXG4gICAgICBpZiAoIWlzRmluaXRlKHgpIHx8IHggPCAwIHx8IHggPj0gREFZU19JTl9XRUVLKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgY29uc3QgZCA9IHggLSBpbnRzW2kgLSAxXVxuICAgICAgICBpZiAoZCA8IDApIHtcbiAgICAgICAgICBpZiAod3JhcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIHdyYXBwZWQgPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAoZCA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh2aXNpdGVkW3hdKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgdmlzaXRlZFt4XSA9IHRydWVcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG4iXX0=